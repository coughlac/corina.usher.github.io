<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expand and Contract: A Gradual Approach to Code Changes</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        h1, h2 {
            color: #2c3e50;
        }
        h1 {
            font-size: 2.5em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        h2 {
            font-size: 1.8em;
            margin-top: 30px;
        }
        img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 20px 0;
        }
        ol {
            padding-left: 20px;
        }
        a {
            color: #3498db;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        sup {
            font-size: 0.75em;
            line-height: 0;
            position: relative;
            vertical-align: baseline;
            top: -0.5em;
        }
        .reference {
            color: #3498db;
            text-decoration: none;
            cursor: pointer;
        }
        .reference:hover {
            text-decoration: underline;
        }






    </style>
</head>
<body>
<article>
    <h1>Expand and Contract: A Gradual Approach to Code Changes</h1>

    <p>In the world of software development, making significant changes to your codebase can be a daunting task.
        Traditional methods like branching in source control or using conditional statements have their drawbacks. Enter
        "Expand and Contract," a technique that offers a more gradual and manageable approach to implementing
        large-scale changes<sup><a href="#ref1" class="reference">[1]</a></sup><sup><a href="#ref2" class="reference">[2]</a></sup>.
    </p>

    <h2>What is Expand and Contract?</h2>
    <img src="images/overview.png" alt="Expand and Contract Diagram">
    <p>Expand and Contract<sup><a href="#ref1" class="reference">[1]</a></sup>, also known as the Parallel Change
        pattern<sup><a href="#ref2" class="reference">[2]</a></sup> , is a well-established approach for introducing
        backward-incompatible changes[1][2]. It consists of three distinct phases: expand, migrate, and contract.</p>

    <h2>The Key Benefits</h2>
    <ol>
        <li><em>Zero downtime:</em> Incompatible changes to data structures can be deployed without any system downtime
        </li>
        <li><em>Easier testing:</em> The pattern allows running application instances with old and new code in
            parallel, making it easier to deploy and test code changes on a subset of instances first.
            Incompatible changes to data structures can be deployed without any system downtime
        </li>
        <li><em>Enables advanced release techniques:</em> The backwards compatible nature of changes allows for
            feature flags, dark launching, and canary releasing
        </li>
    </ol>
    <h2>The Expand Phase</h2>
    <img src="images/step1.png" alt="Expand Phase Diagram">
    <p>In the expand phase, the code is modified to support both old and new versions simultaneously. This allows
        existing clients to continue using the old version while new changes are introduced incrementally. For example,
        when introducing a new mandatory field in a class, it would initially be added as optional to maintain
        compatibility with the old version.</p>

    <h2>The Migrate Phase</h2>
    <img src="images/step2.png" alt="Migrate Phase Diagram">
    <p>During the migrate phase, all client code is gradually updated to use the new version, and the old version is
        deprecated. In our example, all code would now expect and be able to process the new optional field.</p>

    <h2>The Contract Phase</h2>
    <p>Once the migrate phase is complete, the old version can be removed in the contract phase. At this point, the new
        field can be made mandatory, as all code will now supply it.</p>

    <h2>Conclusion</h2>
    <p>The Expand and Contract pattern provides a safe and gradual approach to implementing breaking changes in software
        systems. By following this pattern, developers can make significant modifications to their codebase while
        minimizing disruption to existing functionality. It is a good choice for implementing complex changes in
        systems, particularly those that cannot afford downtime.
    </p>
    <h2>References</h2>
    <ol>
        <li><a href="https://www.tim-wellhausen.de/papers/ExpandAndContract/ExpandAndContract.html" alt="Wellhausen, T. (n.d.). Expand and Contract - A Pattern to Apply Breaking Changes to Persistent Data with
            Zero Downtime">Wellhausen, T. (n.d.). Expand and Contract - A Pattern to Apply Breaking Changes to
            Persistent Data with
            Zero Downtime</a>
        </li>
        <li><a href="https://martinfowler.com/bliki/ParallelChange.html" alt="Fowler, M. (2014, May 13). Parallel Change.
            Martin Fowler's Bliki.">Fowler, M. (2014, May 13). Parallel Change.
            Martin Fowler's Bliki. </a></li>
    </ol>
</article>
</body>
</html>